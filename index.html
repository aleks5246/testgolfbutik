<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tapingoolf - Din Golfbutik</title>
  <meta name="description" content="Tapingoolf - premiumklubbor, moderna tillbeh√∂r och passion f√∂r spelet. Butik i √ñrebro."/>
  <style>
    :root{
      --primary:#006633;
      --dark-primary:#004d26;
      --accent:#b9f36b;
      --bg:#f5f9f6;
      --card:#fff;
      --text:#222;
      --muted:#6b7280;
      --radius:12px;
      --container:1100px;
    }
    body.dark{
      --primary:#00b357;
      --dark-primary:#006b33;
      --accent:#8fffba;
      --bg:#0b1220;
      --card:#111827;
      --text:#e6eef0;
      --muted:#9aa6b2;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:Inter, "Segoe UI", Tahoma, sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.5;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition:background .25s,color .25s;
    }

    /* Header */
    header{
      background:linear-gradient(135deg,var(--dark-primary),var(--primary));
      color:white;
      position:sticky;
      top:0;
      z-index:60;
      box-shadow:0 2px 8px rgba(0,0,0,.18);
    }
    .topbar{
      max-width:var(--container);
      margin:0 auto;
      display:flex;
      gap:16px;
      align-items:center;
      padding:12px 20px;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .brand h1{
      margin:0;
      font-size:1.25rem;
      letter-spacing:0.6px;
    }
    nav{
      display:flex;
      gap:14px;
      align-items:center;
      flex-wrap:wrap;
    }
    nav a{ color:white; text-decoration:none; font-weight:600; font-size:0.95rem; opacity:.98}
    .header-actions{ display:flex; gap:12px; align-items:center }

    /* small mobile menu */
    .menu-toggle{
      display:none;
      background:transparent;
      border:1px solid rgba(255,255,255,.12);
      color:white;
      padding:8px;
      border-radius:8px;
    }

    /* Hero */
    .hero{
      position:relative;
      color:white;
      text-align:center;
      padding:80px 20px;
      overflow:hidden;
    }
    /* use a responsive image with cover */
    .hero-bg{
      position:absolute;
      inset:0;
      background-image:url("https://images.unsplash.com/photo-1504215680853-026ed2a45def?auto=format&fit=crop&w=1950&q=80");
      background-position:center;
      background-size:cover;
      filter:contrast(.95) saturate(1.02);
      z-index:0;
    }
    .hero::after{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.45));
      z-index:1;
    }
    .hero-inner{
      position:relative;
      z-index:2;
      max-width:var(--container);
      margin:0 auto;
    }
    .hero h2{ font-size:2.1rem; margin:0 0 10px; letter-spacing:.3px }
    .hero p{ margin:0 auto; max-width:720px; color:rgba(255,255,255,.95); font-size:1rem }

    /* Main sections */
    main{ max-width:var(--container); margin:40px auto; padding:0 20px; }

    .section-title{ text-align:center; color:var(--primary); margin-bottom:18px; font-size:1.25rem; font-weight:700 }

    /* Controls */
    .controls{
      display:flex;
      gap:12px;
      justify-content:center;
      margin-bottom:20px;
      flex-wrap:wrap;
    }
    .controls input[type="search"], .controls select{
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #d1d5db;
      min-width:180px;
      font-size:0.95rem;
      background:var(--card);
      color:var(--text);
    }
    .controls input[type="search"]{ width:300px; max-width:80vw }

    /* Products grid */
    .products{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:20px;
      align-items:start;
    }
    .product{
      background:var(--card);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:0 6px 18px rgba(16,24,40,.06);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .product:hover{ transform:translateY(-6px); box-shadow:0 12px 28px rgba(16,24,40,.12) }
    .product .media{ width:100%; height:200px; overflow:hidden; background:#eee }
    .product img{ width:100%; height:100%; object-fit:cover; display:block; }
    .product .info{ padding:14px; text-align:center }
    .product h3{ margin:6px 0; color:var(--primary); font-size:1rem }
    .product p.price{ margin:6px 0; color:var(--muted); font-weight:700 }
    .product button{ margin-top:8px; background:var(--primary); color:white; border:none; padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:700 }

    /* Cart */
    .cart{
      margin-top:26px;
      background:var(--card);
      border-radius:var(--radius);
      padding:16px;
      box-shadow:0 6px 18px rgba(16,24,40,.04);
    }
    .cart h3{ margin:0 0 10px 0; font-size:1.05rem }
    .cart-items{ display:flex; flex-direction:column; gap:8px; max-height:260px; overflow:auto; padding-right:6px }
    .cart-item{ display:flex; justify-content:space-between; align-items:center; padding:6px 0; border-bottom:1px solid #efefef }
    .cart-total{ text-align:right; margin-top:10px; font-weight:800 }

    .swish-btn{ background:var(--accent); color:#000; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:800 }

    /* Gallery */
    .gallery{ display:grid; grid-template-columns:repeat(2,1fr); gap:16px; margin-top:20px }
    .gallery img{ width:100%; height:220px; object-fit:cover; border-radius:12px; display:block; box-shadow:0 6px 18px rgba(16,24,40,.06) }

    /* Reviews */
    .reviews{ text-align:center; margin-top:28px }
    .reviews p{ color:var(--muted) }

    /* Contact and map */
    .contact-grid{ display:grid; grid-template-columns:1fr 420px; gap:18px; align-items:start; margin-top:24px }
    .contact-card{ background:var(--card); padding:16px; border-radius:12px; box-shadow:0 6px 18px rgba(16,24,40,.04) }
    .map-embed{ width:100%; height:100%; min-height:260px; border-radius:10px; overflow:hidden; border:0 }

    /* Footer */
    footer{ margin-top:40px; background:var(--dark-primary); color:white; padding:24px 18px; text-align:center }
    footer a{ color:var(--accent); text-decoration:none; font-weight:700 }

    /* Notification */
    .notification{
      position:fixed; right:18px; top:18px;
      background:var(--primary); color:white; padding:10px 14px; border-radius:10px; display:none; z-index:80;
      box-shadow:0 6px 18px rgba(0,0,0,.2);
    }

    /* Popup overlay */
    .overlay{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.6); justify-content:center; align-items:center; z-index:90 }
    .popup{ background:var(--card); padding:18px; border-radius:12px; width:min(420px,94%); box-shadow:0 12px 30px rgba(0,0,0,.25) }
    .popup input, .popup textarea, .popup select{ width:100%; padding:10px; margin-top:8px; border-radius:8px; border:1px solid #ddd; font-size:0.95rem; background:transparent; color:var(--text) }
    .popup .actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:12px }

    /* small screens */
    @media (max-width:1000px){
      .products{ grid-template-columns:repeat(2,1fr) }
      .contact-grid{ grid-template-columns:1fr; }
      .gallery img{ height:180px }
      .hero{ padding:60px 18px }
      .hero h2{ font-size:1.6rem }
      .hero p{ font-size:0.95rem }
    }
    @media (max-width:640px){
      .products{ grid-template-columns:1fr }
      .controls input[type="search"]{ width:100% }
      nav{ display:none }
      .menu-toggle{ display:inline-flex }
      .topbar{ padding:10px 12px }
      .brand h1{ font-size:1.05rem }
      .hero{ padding:48px 12px }
      .hero h2{ font-size:1.3rem }
      .gallery{ grid-template-columns:1fr }
      .product .media{ height:180px }
    }
  </style>
</head>
<body>
  <header>
    <div class="topbar">
      <div class="brand">
        <button class="menu-toggle" id="menuToggle" aria-label="Meny">‚ò∞</button>
        <h1>Tapingoolf</h1>
        <div style="font-size:0.85rem; color:rgba(255,255,255,.9); margin-left:8px">Din Golfbutik ‚Äî √ñrebro</div>
      </div>

      <nav id="mainNav" aria-label="Huvudnavigation">
        <a href="#products">Produkter</a>
        <a href="#about">Om oss</a>
        <a href="#reviews">Recensioner</a>
        <a href="#contact">Kontakt</a>
      </nav>

      <div class="header-actions">
        <div style="background:var(--accent); padding:6px 10px; border-radius:10px; font-weight:700">Kundvagn: <span id="cartCount">0</span></div>
        <button id="themeToggle" aria-label="V√§xla tema" style="background:transparent;border:1px solid rgba(255,255,255,.12);color:white;padding:8px;border-radius:8px">üåô</button>
      </div>
    </div>
  </header>

  <section class="hero" aria-labelledby="heroTitle">
    <div class="hero-bg" aria-hidden="true"></div>
    <div class="hero-inner">
      <h2 id="heroTitle">Upplev golf p√• riktigt ‚Äî premiumutrustning & lokal service</h2>
      <p>Premiumklubbor, moderna tillbeh√∂r och passion f√∂r spelet. Hitta r√§tt utrustning och f√∂rbered dig f√∂r b√§sta runda ‚Äî b√•de online och i v√•r fysiska butik.</p>
    </div>
  </section>

  <main>
    <!-- PRODUKTER -->
    <section id="products" aria-labelledby="productsTitle">
      <h3 class="section-title" id="productsTitle">V√•ra produkter</h3>

      <div class="controls" role="search" aria-label="Produkter s√∂k och sortering">
        <input type="search" id="search" placeholder="üîç S√∂k produkter..." aria-label="S√∂k produkter">
        <select id="sort" aria-label="Sortera produkter">
          <option value="">Sortera...</option>
          <option value="name">Namn (A‚Äì√ñ)</option>
          <option value="priceLow">Pris (stigande)</option>
          <option value="priceHigh">Pris (fallande)</option>
        </select>
      </div>

      <div class="products" id="productList" aria-live="polite"></div>

      <div class="cart" aria-labelledby="cartTitle">
        <h3 id="cartTitle">Kundvagn</h3>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-total" id="cartTotal">Totalt: 0 kr</div>
        <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:12px">
          <button class="swish-btn" id="payBtn">Betala med Swish</button>
        </div>
      </div>
    </section>

    <!-- OM / GALLERI -->
    <section id="about" aria-labelledby="aboutTitle" style="margin-top:34px">
      <h3 class="section-title" id="aboutTitle">Om oss</h3>
      <p style="text-align:center; max-width:800px; margin:0 auto 16px">Tapingoolf grundades 2025 i √ñrebro av golfentusiaster som vill g√∂ra sporten tillg√§nglig och rolig. Vi erbjuder noggrant utvalda produkter, kunnig service och snabba leveranser.</p>

      <div class="gallery" aria-hidden="false">
        <!-- tv√• Unsplash-bilder som passar golf och natur -->
        <img src="https://images.unsplash.com/photo-1593697972847-70458d3a63c1?auto=format&fit=crop&w=1400&q=80" alt="Golfbana i solnedg√•ng" loading="lazy">
        <img src="https://images.unsplash.com/photo-1526401485004-2aa7c4bda4ab?auto=format&fit=crop&w=1400&q=80" alt="Golfspelare p√• green" loading="lazy">
      </div>
    </section>

    <!-- RECENSIONER -->
    <section id="reviews" class="reviews" aria-labelledby="reviewsTitle">
      <h3 class="section-title" id="reviewsTitle">Kundrecensioner</h3>
      <p id="reviewCount">‚≠ê Inga recensioner √§nnu ‚Äì var den f√∂rsta att dela din upplevelse!</p>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:12px">
        <button onclick="openReviewPopup()" style="padding:10px 14px; border-radius:10px; border:none; background:var(--primary); color:white; font-weight:700">L√§mna recension</button>
        <button onclick="showAllReviews()" style="padding:10px 14px; border-radius:10px; border:1px solid #e6e6e6; background:transparent">Visa recensioner</button>
      </div>
    </section>

    <!-- KONTAKT & KARTA -->
    <section id="contact" style="margin-top:34px">
      <h3 class="section-title">Kontakt & butik</h3>
      <div class="contact-grid">
        <div class="contact-card">
          <h4 style="margin-top:0">Hitta till oss</h4>
          <p style="margin:8px 0"><strong>Adress:</strong> Storbackav√§gen 19, 702 42 √ñrebro</p>
          <p style="margin:8px 0"><strong>Telefon:</strong> <a href="tel:0721955603">072-195 56 03</a></p>
          <p style="margin:8px 0"><strong>√ñppettider:</strong> √ñppet dygnet runt</p>
          <p style="margin:8px 0">F√∂lj oss: <a href="https://www.instagram.com/tapingoolf" target="_blank" rel="noopener">Instagram @tapingoolf</a></p>
        </div>

        <div style="border-radius:12px; overflow:hidden;">
          <!-- Google Maps embed with query (works responsive) -->
          <iframe class="map-embed"
            src="https://www.google.com/maps?q=Storbackav%C3%A4gen+19+702+42+%C3%96rebro&output=embed"
            loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Karta till Tapingoolf"></iframe>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div style="max-width:var(--container); margin:0 auto; padding:8px 20px">
      <div style="margin-bottom:8px">¬© 2025 Tapingoolf. Alla r√§ttigheter f√∂rbeh√•llna.</div>
      <div>F√∂lj oss p√• <a href="https://www.instagram.com/tapingoolf" target="_blank" rel="noopener">Instagram @tapingoolf</a></div>
    </div>
  </footer>

  <!-- Popups & UI -->
  <div class="notification" id="notification" role="status" aria-live="polite"></div>

  <div class="overlay" id="overlay">
    <div class="popup" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
      <h4 id="popupTitle">L√§mna en recension</h4>
      <input id="reviewName" placeholder="Ditt namn (obligatoriskt)">
      <select id="reviewStars" aria-label="Antal stj√§rnor">
        <option value="5">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</option>
        <option value="4">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</option>
        <option value="3">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</option>
        <option value="2">‚≠êÔ∏è‚≠êÔ∏è</option>
        <option value="1">‚≠êÔ∏è</option>
      </select>
      <textarea id="reviewText" rows="4" placeholder="Din recension... (obligatoriskt)"></textarea>
      <div class="actions">
        <button onclick="closeReviewPopup()" style="background:#efefef;padding:8px 12px;border-radius:8px;border:none">Avbryt</button>
        <button onclick="submitReview()" style="background:var(--primary); color:white; padding:8px 12px; border-radius:8px; border:none">Skicka</button>
      </div>
    </div>
  </div>

  <div class="overlay" id="reviewsOverlay" style="display:none; align-items:flex-start; overflow:auto; padding:30px 12px">
    <div class="popup" style="max-width:760px;">
      <h4>Recensioner</h4>
      <div id="reviewsList" style="max-height:60vh; overflow:auto; margin-top:8px"></div>
      <div style="display:flex; justify-content:flex-end; margin-top:12px">
        <button onclick="document.getElementById('reviewsOverlay').style.display='none'" style="padding:8px 12px;border-radius:8px;border:none;background:#efefef">St√§ng</button>
      </div>
    </div>
  </div>

  <script>
    /* ---------- data ---------- */
    const PRODUCTS = [
      { id:1, name:"Pro Drive Elite", price:3499, img:"https://images.unsplash.com/photo-1579829366248-204fe8413e6a?auto=format&fit=crop&w=1400&q=80" },
      { id:2, name:"IronMaster 7", price:1999, img:"https://images.unsplash.com/photo-1603570811565-d2516ec8c73f?auto=format&fit=crop&w=1400&q=80" },
      { id:3, name:"SoftSpin Bollar (12-pack)", price:499, img:"https://images.unsplash.com/photo-1588854337221-4b42c3cdd1a4?auto=format&fit=crop&w=1400&q=80" },
      { id:4, name:"Precision Putter", price:1299, img:"https://images.unsplash.com/photo-1600959907703-3a1df2c72854?auto=format&fit=crop&w=1400&q=80" },
      { id:5, name:"Fairway Pro Glove", price:299, img:"https://images.unsplash.com/photo-1604159381999-9d1e8f5da1b9?auto=format&fit=crop&w=1400&q=80" }
    ];

    /* ---------- state & storage ---------- */
    let cart = JSON.parse(localStorage.getItem('tapingoolf_cart')) || [];
    let reviews = JSON.parse(localStorage.getItem('tapingoolf_reviews')) || [];

    /* ---------- ui elements ---------- */
    const productListEl = document.getElementById('productList');
    const cartItemsEl = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const cartCountEl = document.getElementById('cartCount');
    const notificationEl = document.getElementById('notification');
    const searchEl = document.getElementById('search');
    const sortEl = document.getElementById('sort');

    /* ---------- helper: render products ---------- */
    function renderProducts(items = PRODUCTS) {
      productListEl.innerHTML = '';
      items.forEach(p => {
        const div = document.createElement('div');
        div.className = 'product';
        div.innerHTML = `
          <div class="media">
            <img src="${p.img}" alt="${escapeHtml(p.name)}" loading="lazy">
          </div>
          <div class="info">
            <h3>${escapeHtml(p.name)}</h3>
            <p class="price">${p.price.toLocaleString('sv-SE')} kr</p>
            <button aria-label="L√§gg till ${escapeHtml(p.name)}" onclick="addToCart(${p.id})">L√§gg till i kundvagn</button>
          </div>
        `;
        productListEl.appendChild(div);
      });
    }

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[s]));
    }

    /* ---------- cart ---------- */
    function addToCart(productId){
      const prod = PRODUCTS.find(p=>p.id===productId);
      if(!prod) return;
      cart.push({ id:prod.id, name:prod.name, price:prod.price });
      saveCart();
      updateCart();
      showNotification(`${prod.name} lades till i kundvagnen`);
    }

    function removeFromCart(index){
      cart.splice(index,1);
      saveCart();
      updateCart();
    }

    function saveCart(){
      localStorage.setItem('tapingoolf_cart', JSON.stringify(cart));
    }

    function updateCart(){
      cartItemsEl.innerHTML = '';
      let sum = 0;
      cart.forEach((it,i)=>{
        sum += it.price;
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `<div style="max-width:70%">${escapeHtml(it.name)}</div>
                         <div>${it.price.toLocaleString('sv-SE')} kr <button style="background:transparent;border:none;cursor:pointer;margin-left:8px" onclick="removeFromCart(${i})">‚ùå</button></div>`;
        cartItemsEl.appendChild(row);
      });
      cartTotalEl.textContent = 'Totalt: ' + sum.toLocaleString('sv-SE') + ' kr';
      cartCountEl.textContent = cart.length;
    }

    document.getElementById('payBtn').addEventListener('click', ()=>{
      if(cart.length===0){ alert('Din kundvagn √§r tom!'); return }
      const sum = cart.reduce((a,b)=>a+b.price,0);
      alert(`Swish-betalning simulerad!\nBelopp: ${sum.toLocaleString('sv-SE')} kr\nTack f√∂r ditt k√∂p!`);
      cart = [];
      saveCart();
      updateCart();
    });

    /* ---------- notifications ---------- */
    let notifTimer = null;
    function showNotification(msg, time=2200){
      if(notifTimer) clearTimeout(notifTimer);
      notificationEl.textContent = msg;
      notificationEl.style.display = 'block';
      notifTimer = setTimeout(()=>{ notificationEl.style.display='none' }, time);
    }

    /* ---------- search & sort ---------- */
    searchEl.addEventListener('input', applyFilters);
    sortEl.addEventListener('change', applyFilters);

    function applyFilters(){
      const q = searchEl.value.trim().toLowerCase();
      let filtered = PRODUCTS.filter(p => p.name.toLowerCase().includes(q));
      const s = sortEl.value;
      if(s==='name') filtered.sort((a,b)=>a.name.localeCompare(b.name));
      if(s==='priceLow') filtered.sort((a,b)=>a.price - b.price);
      if(s==='priceHigh') filtered.sort((a,b)=>b.price - a.price);
      renderProducts(filtered);
    }

    /* ---------- reviews ---------- */
    function openReviewPopup(){ document.getElementById('overlay').style.display='flex' }
    function closeReviewPopup(){ document.getElementById('overlay').style.display='none' }

    function submitReview(){
      const name = document.getElementById('reviewName').value.trim();
      const stars = document.getElementById('reviewStars').value;
      const text = document.getElementById('reviewText').value.trim();
      if(!name || !text){ alert('Fyll i namn och text i recensionen.'); return }
      reviews.push({ name, stars: Number(stars), text, date:new Date().toISOString() });
      localStorage.setItem('tapingoolf_reviews', JSON.stringify(reviews));
      closeReviewPopup();
      updateReviewCount();
      showNotification('Tack f√∂r din recension!');
      // clear inputs
      document.getElementById('reviewName').value='';
      document.getElementById('reviewText').value='';
      document.getElementById('reviewStars').value='5';
    }

    function updateReviewCount(){
      const el = document.getElementById('reviewCount');
      if(reviews.length===0){
        el.textContent = '‚≠ê Inga recensioner √§nnu ‚Äì var den f√∂rsta att dela din upplevelse!';
      } else {
        const avg = (reviews.reduce((a,b)=>a+b.stars,0)/reviews.length).toFixed(1);
        el.textContent = `‚≠ê ${avg} i snitt ‚Äî ${reviews.length} recension${reviews.length>1?'er':''}`;
      }
    }

    function showAllReviews(){
      const overlay = document.getElementById('reviewsOverlay');
      const list = document.getElementById('reviewsList');
      list.innerHTML = '';
      if(reviews.length===0){
        list.innerHTML = '<p style="color:var(--muted)">Inga recensioner √§nnu.</p>';
      } else {
        reviews.slice().reverse().forEach(r=>{
          const row = document.createElement('div');
          row.style.borderBottom='1px solid #eee';
          row.style.padding='10px 0';
          row.innerHTML = `<strong>${escapeHtml(r.name)}</strong> &nbsp;<span style="color:var(--muted)">(${new Date(r.date).toLocaleString()})</span>
            <div style="margin-top:6px">‚≠ê ${'‚òÖ'.repeat(r.stars)}${'‚òÜ'.repeat(5-r.stars)}</div>
            <div style="margin-top:6px;color:var(--muted)">${escapeHtml(r.text)}</div>`;
          list.appendChild(row);
        });
      }
      overlay.style.display='flex';
    }

    /* ---------- menu toggle & theme ---------- */
    const menuToggle = document.getElementById('menuToggle');
    const mainNav = document.getElementById('mainNav');
    menuToggle.addEventListener('click', ()=> {
      if (mainNav.style.display === 'flex') mainNav.style.display = '';
      else mainNav.style.display = 'flex';
      mainNav.style.flexDirection = 'column';
      mainNav.style.position = 'absolute';
      mainNav.style.right = '12px';
      mainNav.style.top = '62px';
      mainNav.style.background = 'linear-gradient(135deg,var(--dark-primary),var(--primary))';
      mainNav.style.padding = '10px';
      mainNav.style.borderRadius = '10px';
      mainNav.style.zIndex = 80;
    });

    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', ()=>{
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      themeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('tapingoolf_theme', isDark ? 'dark' : 'light');
    });

    /* ---------- utility: escape, init ---------- */
    function init(){
      // apply saved theme
      const savedTheme = localStorage.getItem('tapingoolf_theme');
      if(savedTheme==='dark'){ document.body.classList.add('dark'); themeToggle.textContent='‚òÄÔ∏è' }
      // render ui
      renderProducts();
      updateCart();
      updateReviewCount();
    }

    /* ---------- load initial state ---------- */
    init();

    /* ---------- map accessibility: if user wants fullscreen maps ---------- */
    // nothing needed; iframe included in markup.

    /* ---------- small helper: ensure product images load gracefully ---------- */
    // add error handler to images (if an external image fails, use a placeholder)
    window.addEventListener('load', ()=>{
      document.querySelectorAll('.product img, .gallery img').forEach(img=>{
        img.addEventListener('error', ()=> img.src = 'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="500"><rect width="100%" height="100%" fill="%23ddd"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%23888" font-family="Arial" font-size="20">Bild saknas</text></svg>');
      });
    });

    /* ---------- small accessibility helpers ---------- */
    // close review popup when clicking outside popup
    document.getElementById('overlay').addEventListener('click', (e)=>{
      if(e.target.id === 'overlay') closeReviewPopup();
    });
  </script>
</body>
</html>
